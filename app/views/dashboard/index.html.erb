<!DOCTYPE html>
<html>
<head>
  <title>FeedCo</title>
  <%= stylesheet_link_tag 'application', media: 'all' %>
</head>
<body>
  <div class="dashboard">
    <header class="dashboard-header">
      <h1>FeedCo</h1>
    </header>
    <div class="dashboard-content">
      <div class="widget-row">
        <div class="widget">
          <h2>Purchasing</h2>
          <!-- Insert graph here -->
        </div>
        <div class="widget">
          <h2>Inventory</h2>
          <!-- Insert graph here -->
        </div>
        <div class="widget">
          <h2>Sales</h2>
          <!-- Insert graph here -->
        </div>
      </div>
      <div class="widget-row">
        <div id="container" class="widget large-widget">
          <!-- Insert combined graph or content here -->
        </div>
        <div class="widget">
          <h3>Sales Last Quarter</h3>
          <!-- Insert graph here -->
        </div>
      </div>
    </div>
  </div>
</body>
</html>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const salesData = <%= @sales_data.to_json.html_safe %>;

    Highcharts.chart('container', {
      chart: {
        type: 'line'
      },
      title: {
        text: 'Monthly Sales Data'
      },
      subtitle: {
        text: 'Last Six Months'
      },
      xAxis: {
        categories: ['January', 'February', 'March', 'April', 'May', 'June'] // Adjust this based on the current month
      },
      yAxis: {
        title: {
          text: 'Sales Count'
        }
      },
      plotOptions: {
        line: {
          dataLabels: {
            enabled: true
          },
          enableMouseTracking: true
        }
      },
      series: Object.keys(salesData).map(productName => ({
        name: productName,
        data: salesData[productName]
      }))
    });
  });
</script>